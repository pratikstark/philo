"use strict";(self.webpackChunkvet_website_react=self.webpackChunkvet_website_react||[]).push([[597],{4877:(e,a,i)=>{i.d(a,{Ij:()=>n,L0:()=>l,n$:()=>t,oT:()=>r});var s=i(6213);const t=async e=>await s.A.post("/doctor",e),r=async e=>await s.A.get("/doctor/".concat(e)),n=async(e,a)=>await s.A.post("/doctor/get/review",{locationArray:e,doctorId:a}),l=async(e,a)=>await s.A.put("/doctor/".concat(e),a)},8722:(e,a,i)=>{i.d(a,{EJ:()=>r,O4:()=>t,h:()=>n,wO:()=>l});var s=i(6213);const t=async(e,a)=>await s.A.post("/review",{review:e,token:a}),r=async(e,a,i)=>await s.A.put("/review/".concat(e),{review:a,token:i}),n=async(e,a)=>await s.A.get("/review/with-user",{params:{reviewType:a,reviewOfId:e}}),l=async(e,a)=>await s.A.delete("/review/".concat(e),{data:{token:a}})},3837:(e,a,i)=>{i.d(a,{I3:()=>t,KX:()=>r,RJ:()=>n});var s=i(6213);const t=async e=>await s.A.get("/user/".concat(e)),r=async e=>await s.A.get("/user-target/".concat(e)),n=async(e,a,i)=>await s.A.put("/user/".concat(e),{user:a,token:i})},2514:(e,a,i)=>{i.d(a,{A:()=>l});var s=i(5043),t=i(7282),r=i(8722),n=i(579);const l=e=>{var a,i,l,o,c,d,u;const[v,h]=(0,s.useState)(""),[m,g]=(0,s.useState)(0),[x,w]=(0,s.useState)(""),{loggedUser:p,reviewType:j,reviewOfId:N,reviews:k,setReviews:y}=e,f=new Intl.DateTimeFormat("en-In",{year:"numeric",month:"long",day:"numeric"});return(0,n.jsxs)("div",{className:"uk-card uk-card-default",children:[(0,n.jsxs)("div",{className:"uk-card-header",children:[(0,n.jsxs)("div",{className:"uk-grid-small uk-flex-middle","uk-grid":"",children:[(0,n.jsx)("div",{className:"uk-width-auto",children:(0,n.jsx)("img",{className:"uk-border-circle",width:"50",height:"50",alt:null!==p&&void 0!==p&&null!==(a=p.user)&&void 0!==a&&a.name?"".concat(null===p||void 0===p||null===(i=p.user)||void 0===i?void 0:i.name):"Philozooic User",title:null!==p&&void 0!==p&&null!==(l=p.user)&&void 0!==l&&l.name?"".concat(null===p||void 0===p||null===(o=p.user)||void 0===o?void 0:o.name):"Philozooic User",src:null!==p&&void 0!==p&&null!==(c=p.user)&&void 0!==c&&c.picturePath?"/".concat(null===p||void 0===p||null===(d=p.user)||void 0===d?void 0:d.picturePath):"/pp-default.jpg"})}),(0,n.jsxs)("div",{className:"uk-width-expand",children:[""===x&&(0,n.jsx)("div",{className:"review-star-div-desktop",children:(0,n.jsx)(t.A,{rating:Number(m),starDimension:"17px",changeRating:e=>g(e),starHoverColor:"rgb(109, 122, 130)"})}),(0,n.jsx)("h3",{className:"uk-card-title uk-margin-remove-bottom reviewer-name",children:null===p||void 0===p||null===(u=p.user)||void 0===u?void 0:u.name}),(0,n.jsx)("p",{className:"uk-text-meta uk-margin-remove-top info-date",children:f.format()})]})]}),(0,n.jsx)("div",{className:"review-star-div-mobile",children:(0,n.jsx)(t.A,{rating:Number(m),starDimension:"17px",changeRating:e=>g(e),starHoverColor:"rgb(109, 122, 130)"})})]}),""===x?(0,n.jsxs)("div",{className:"uk-card-body review-body",children:[(0,n.jsx)("textarea",{className:"uk-textarea",rows:"5",placeholder:"Type your review here",onChange:e=>h(e.target.value),value:v}),(0,n.jsx)("div",{className:"submit-btn-div",children:(0,n.jsx)("button",{onClick:e=>{e.preventDefault(),(async()=>{var e;let a={reviewString:v,rating:m,reviewType:j,reviewOfId:N,reviewerId:null===p||void 0===p||null===(e=p.user)||void 0===e?void 0:e.userId};await(0,r.O4)(a,null===p||void 0===p?void 0:p.token).then((e=>{let{data:a}=e;y([...k,{...a,reviewerData:[p.user]}]),h(""),w(""),g(0)})).catch((e=>{let{response:a}=e;401===a.status&&(w("Session Expired: Please login again."),setTimeout((()=>{localStorage.clear()}),1e4))}))})()},children:"Submit"})})]}):(0,n.jsx)("h6",{className:"session-err-message",children:x})]})}},1597:(e,a,i)=>{i.r(a),i.d(a,{default:()=>v});var s=i(5043),t=i(7282),r=(i(7735),i(4877)),n=i(3837),l=i(8722),o=i(2514),c=i(4681),d=i(2582),u=i(579);const v=e=>{const{doctorId:a}=e.match.params,[i,v]=(0,s.useState)(null),[h,m]=(0,s.useState)(null),[g,x]=(0,s.useState)([]),[w,p]=(0,s.useState)(!0);(0,s.useEffect)((()=>{if("undefined"===typeof e.location.state)k(a);else{let{tempDoctor:a}=e.location.state;v(a)}y(a),f(a)}),[a,e.location]);const j=new Intl.NumberFormat("en-IN"),N=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}),k=async e=>{await(0,r.Ij)([],e).then((e=>{let{data:a}=e;v(null===a||void 0===a?void 0:a[0]),p(!0)})).catch((e=>{404===e.response.status&&p(!1),console.error(e)}))},y=async e=>{await(0,n.KX)(e).then((e=>{let{data:a}=e;m(a)})).catch((e=>{404===e.response.status&&p(!1),console.error(e)}))},f=async e=>{await(0,l.h)(e,"Doctor").then((e=>{let{data:a}=e;x(a)})).catch((e=>{console.error(e),x([])}))};return(()=>{var e;return w?null===i||null===h?(0,u.jsx)("span",{"uk-spinner":"ratio: 4.5"}):(0,u.jsxs)("div",{"uk-grid":"",className:"section individual-grid",children:[(0,u.jsxs)("div",{className:"uk-width-2-5@l",children:[(0,u.jsx)("img",{src:"/".concat(i.picturePath),alt:"Veterinary Doctor: ".concat(i.firstName," ").concat(i.lastName),title:"Veterinary Doctor: ".concat(i.firstName," ").concat(i.lastName),className:"profile-pic"}),(0,u.jsxs)("div",{className:"info-contact",children:[(0,u.jsx)("h3",{children:"Contact details:"}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("span",{className:"contact-span",children:[(0,u.jsx)("span",{"uk-icon":"icon: mail; ratio: 2"}),"\xa0 \xa0",(0,u.jsx)("a",{href:"mailto:".concat(h.email),children:h.email})]}),(0,u.jsxs)("span",{className:"contact-span",children:[(0,u.jsx)("span",{"uk-icon":"icon: receiver; ratio: 2"}),"\xa0 \xa0",(0,u.jsx)("a",{href:"tel:".concat(h.phoneNumber),children:h.phoneNumber})]}),(0,u.jsxs)("span",{className:"contact-span",children:[(0,u.jsx)("span",{"uk-icon":"icon: location; ratio: 2"}),"\xa0 \xa0",(0,u.jsx)("span",{children:i.address})]})]}),(0,u.jsx)("hr",{})]})]}),(0,u.jsxs)("div",{className:"uk-width-3-5@l",children:[(0,u.jsxs)("h1",{className:"info-name",children:["Dr. ",i.firstName," ",i.lastName," ",i.reviewAvg>4&&(0,u.jsx)("span",{className:"uk-label label",children:"Highly Rated"})]}),(0,u.jsxs)("h3",{className:"info-charge",children:[N.format(i.charge),"/",i.chargeDuration]}),(0,u.jsx)("div",{className:"info-ratings",children:(0,u.jsx)(t.A,{rating:Number(i.reviewAvg)})}),(0,u.jsx)("div",{children:(0,u.jsxs)("h5",{className:"info-ratings-num",children:[null===(e=i.reviewAvg)||void 0===e?void 0:e.toFixed(3)," (",j.format(i.reviewCount)," review",(0===i.reviewCount||i.reviewCount>1)&&"s",")"]})}),(0,u.jsx)("hr",{}),(0,u.jsxs)("h5",{children:["Specialty: ",i.specialty," | Location: ",i.location]}),(0,u.jsxs)("h4",{children:["About Dr. ",i.firstName,":"]}),(0,u.jsx)("p",{children:i.about}),(0,u.jsx)("hr",{}),(0,u.jsx)("h4",{children:"Add a review:"}),(()=>{let e=JSON.parse(localStorage.getItem("loggedInUser"));var i;return e?(null===(i=e.user)||void 0===i?void 0:i.targetUserId)===a?(0,u.jsx)("legend",{children:"You cannot review your own doctor profile."}):(0,u.jsx)(o.A,{loggedUser:e,reviewType:"Doctor",reviewOfId:a,setReviews:x,reviews:g}):(0,u.jsxs)("legend",{children:["You're not logged in. ",(0,u.jsx)(d.N_,{to:"/login",children:"Login here"})]})})(),(0,u.jsx)("hr",{}),(0,u.jsx)("h4",{children:"Reviews:"}),0===g.length?(0,u.jsx)("legend",{children:"There are no reviews, yet."}):g.map(((e,a)=>(0,u.jsx)(c.A,{reviewUser:e,index:a,setReviews:x,reviews:g},e.doctorId)))]})]}):(0,u.jsx)("p",{className:"not-found-message",children:"404: Sorry, this page is not available!"})})()}},4681:(e,a,i)=>{i.d(a,{A:()=>l});var s=i(5043),t=i(7282),r=i(8722),n=i(579);const l=e=>{var a,i,l,o,c,d,u,v,h,m,g,x,w,p;const{reviewUser:j,index:N,setReviews:k,reviews:y}=e,[f,b]=(0,s.useState)(!1),[I,S]=(0,s.useState)(j.reviewString),[A,D]=(0,s.useState)(null!==(a=null===j||void 0===j?void 0:j.rating)&&void 0!==a?a:2.5),[C,P]=(0,s.useState)(""),R=new Intl.DateTimeFormat("en-In",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"});let T=JSON.parse(localStorage.getItem("loggedInUser"));const U=async()=>{await(0,r.wO)(j.reviewId,T.token).then((e=>{let{data:a}=e,i=[...y];i.splice(N,1),k(i)})).catch((e=>{let{response:a}=e;console.log(a),401===a.status&&(P("Delete failed: Session expired. Please login again."),setTimeout((()=>{localStorage.clear()}),1e3))}))},O=()=>{b(!f)};return(0,n.jsxs)("div",{className:"uk-card uk-card-default",children:[(0,n.jsxs)("div",{className:"uk-card-header",children:[(0,n.jsxs)("div",{className:"uk-grid-small uk-flex-middle","uk-grid":"",children:[(0,n.jsx)("div",{className:"uk-width-auto",children:(0,n.jsx)("img",{className:"uk-border-circle",width:"50",height:"50",alt:"".concat(null!==(i=null===j||void 0===j||null===(l=j.reviewerData)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.name)&&void 0!==i?i:"Philozooic User"),title:"".concat(null!==(c=null===j||void 0===j||null===(d=j.reviewerData)||void 0===d||null===(u=d[0])||void 0===u?void 0:u.name)&&void 0!==c?c:"Philozooic User"),src:null!==j&&void 0!==j&&null!==(v=j.reviewerData)&&void 0!==v&&null!==(h=v[0])&&void 0!==h&&h.picturePath?"/".concat(null===j||void 0===j||null===(m=j.reviewerData)||void 0===m||null===(g=m[0])||void 0===g?void 0:g.picturePath):"/pp-default.jpg"})}),(0,n.jsxs)("div",{className:"uk-width-expand",children:[(0,n.jsx)("div",{className:"review-star-div-desktop",children:(0,n.jsx)(t.A,{rating:A>=0?A:null===j||void 0===j?void 0:j.rating,changeRating:f?e=>D(e):()=>{},starDimension:"17px",starHoverColor:"rgb(109, 122, 130)"})}),(0,n.jsx)("h3",{className:"uk-card-title uk-margin-remove-bottom reviewer-name",children:null!==(x=null===j||void 0===j||null===(w=j.reviewerData)||void 0===w||null===(p=w[0])||void 0===p?void 0:p.name)&&void 0!==x?x:"Philozooic User"}),(0,n.jsx)("p",{className:"uk-text-meta uk-margin-remove-top info-date",children:"undefined"!==typeof j.dateCreated&&R.format(new Date(j.dateCreated))})]})]}),(0,n.jsx)("div",{className:"review-star-div-mobile",children:(0,n.jsx)(t.A,{rating:A>=0?A:null===j||void 0===j?void 0:j.rating,changeRating:f?e=>D(e):()=>{},starDimension:"17px",starHoverColor:"rgb(109, 122, 130)"})})]}),(0,n.jsxs)("div",{className:"uk-card-body review-body",children:[(()=>{var e,a;if("undefined"!==typeof T&&null!==T&&T.user.userId===(null===j||void 0===j||null===(e=j.reviewerData)||void 0===e||null===(a=e[0])||void 0===a?void 0:a.userId))return f?""===C?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"edit-close-icon","uk-icon":"icon: close",onClick:e=>O()}),(0,n.jsx)("span",{className:"delete-icon","uk-icon":"icon: trash",onClick:e=>U()})]}):(0,n.jsx)("legend",{children:C}):""===C?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"edit-close-icon","uk-icon":"icon: pencil",onClick:e=>O()}),(0,n.jsx)("span",{className:"delete-icon","uk-icon":"icon: trash",onClick:e=>U()})]}):(0,n.jsx)("legend",{children:C})})(),f?""===C?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("textarea",{className:"uk-textarea",value:I,style:{margin:"7px 0"},onChange:e=>S(e.target.value),rows:"3"}),(0,n.jsx)("button",{onClick:e=>{(async e=>{delete e.reviewerData;let a={...e,reviewString:I,rating:A};await(0,r.EJ)(j.reviewId,a,T.token).then((e=>{let{data:a}=e;console.log(a),b(!1),j.reviewString=I})).catch((e=>{let{response:a}=e;console.log(a),401===a.status&&(P("Edit failed: Session expired. Please login again."),setTimeout((()=>{localStorage.clear()}),1e3))}))})({...j})},className:"update-review-btn",children:"Submit"})]}):C:(0,n.jsx)("p",{children:I})]})]},j.reviewId)}},7735:()=>{}}]);
//# sourceMappingURL=597.23631ac8.chunk.js.map