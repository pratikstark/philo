"use strict";(self.webpackChunkvet_website_react=self.webpackChunkvet_website_react||[]).push([[174],{7129:(e,a,i)=>{i.d(a,{CF:()=>r,Cy:()=>n,Vp:()=>l,vQ:()=>o,xb:()=>t});var s=i(6213);const t=async e=>await s.A.post("/pet",e),n=async e=>await s.A.get("/pet/".concat(e)),r=async e=>await s.A.get("/pet/by_owner/".concat(e)),l=async(e,a,i)=>await s.A.post("/pet/get/review",{locationArray:e,petId:i},{params:{mateStatus:a}}),o=async(e,a)=>await s.A.put("/pet/".concat(e),a)},8722:(e,a,i)=>{i.d(a,{EJ:()=>n,O4:()=>t,h:()=>r,wO:()=>l});var s=i(6213);const t=async(e,a)=>await s.A.post("/review",{review:e,token:a}),n=async(e,a,i)=>await s.A.put("/review/".concat(e),{review:a,token:i}),r=async(e,a)=>await s.A.get("/review/with-user",{params:{reviewType:a,reviewOfId:e}}),l=async(e,a)=>await s.A.delete("/review/".concat(e),{data:{token:a}})},3837:(e,a,i)=>{i.d(a,{I3:()=>t,KX:()=>n,RJ:()=>r});var s=i(6213);const t=async e=>await s.A.get("/user/".concat(e)),n=async e=>await s.A.get("/user-target/".concat(e)),r=async(e,a,i)=>await s.A.put("/user/".concat(e),{user:a,token:i})},2514:(e,a,i)=>{i.d(a,{A:()=>l});var s=i(5043),t=i(7282),n=i(8722),r=i(579);const l=e=>{var a,i,l,o,d,c,u;const[v,h]=(0,s.useState)(""),[m,w]=(0,s.useState)(0),[g,x]=(0,s.useState)(""),{loggedUser:p,reviewType:j,reviewOfId:k,reviews:N,setReviews:y}=e,f=new Intl.DateTimeFormat("en-In",{year:"numeric",month:"long",day:"numeric"});return(0,r.jsxs)("div",{className:"uk-card uk-card-default",children:[(0,r.jsxs)("div",{className:"uk-card-header",children:[(0,r.jsxs)("div",{className:"uk-grid-small uk-flex-middle","uk-grid":"",children:[(0,r.jsx)("div",{className:"uk-width-auto",children:(0,r.jsx)("img",{className:"uk-border-circle",width:"50",height:"50",alt:null!==p&&void 0!==p&&null!==(a=p.user)&&void 0!==a&&a.name?"".concat(null===p||void 0===p||null===(i=p.user)||void 0===i?void 0:i.name):"Philozooic User",title:null!==p&&void 0!==p&&null!==(l=p.user)&&void 0!==l&&l.name?"".concat(null===p||void 0===p||null===(o=p.user)||void 0===o?void 0:o.name):"Philozooic User",src:null!==p&&void 0!==p&&null!==(d=p.user)&&void 0!==d&&d.picturePath?"/".concat(null===p||void 0===p||null===(c=p.user)||void 0===c?void 0:c.picturePath):"/pp-default.jpg"})}),(0,r.jsxs)("div",{className:"uk-width-expand",children:[""===g&&(0,r.jsx)("div",{className:"review-star-div-desktop",children:(0,r.jsx)(t.A,{rating:Number(m),starDimension:"17px",changeRating:e=>w(e),starHoverColor:"rgb(109, 122, 130)"})}),(0,r.jsx)("h3",{className:"uk-card-title uk-margin-remove-bottom reviewer-name",children:null===p||void 0===p||null===(u=p.user)||void 0===u?void 0:u.name}),(0,r.jsx)("p",{className:"uk-text-meta uk-margin-remove-top info-date",children:f.format()})]})]}),(0,r.jsx)("div",{className:"review-star-div-mobile",children:(0,r.jsx)(t.A,{rating:Number(m),starDimension:"17px",changeRating:e=>w(e),starHoverColor:"rgb(109, 122, 130)"})})]}),""===g?(0,r.jsxs)("div",{className:"uk-card-body review-body",children:[(0,r.jsx)("textarea",{className:"uk-textarea",rows:"5",placeholder:"Type your review here",onChange:e=>h(e.target.value),value:v}),(0,r.jsx)("div",{className:"submit-btn-div",children:(0,r.jsx)("button",{onClick:e=>{e.preventDefault(),(async()=>{var e;let a={reviewString:v,rating:m,reviewType:j,reviewOfId:k,reviewerId:null===p||void 0===p||null===(e=p.user)||void 0===e?void 0:e.userId};await(0,n.O4)(a,null===p||void 0===p?void 0:p.token).then((e=>{let{data:a}=e;y([...N,{...a,reviewerData:[p.user]}]),h(""),x(""),w(0)})).catch((e=>{let{response:a}=e;401===a.status&&(x("Session Expired: Please login again."),setTimeout((()=>{localStorage.clear()}),1e4))}))})()},children:"Submit"})})]}):(0,r.jsx)("h6",{className:"session-err-message",children:g})]})}},2174:(e,a,i)=>{i.r(a),i.d(a,{default:()=>v});var s=i(5043),t=i(7282),n=(i(7735),i(7129)),r=i(3837),l=i(8722),o=i(2514),d=i(4681),c=i(2582),u=i(579);const v=e=>{const{petId:a}=e.match.params,[i,v]=(0,s.useState)(null),[h,m]=(0,s.useState)(null),[w,g]=(0,s.useState)([]),[x,p]=(0,s.useState)(!0);(0,s.useEffect)((()=>{if("undefined"===typeof e.location.state)k(a);else{let{tempPet:a}=e.location.state;v(a)}N(null===i||void 0===i?void 0:i.ownerId),y(a)}),[null===i||void 0===i?void 0:i.ownerId,a,e.location.state]);const j=new Intl.NumberFormat("en-IN"),k=async e=>{await(0,n.Vp)([],void 0,e).then((e=>{let{data:a}=e;console.info(a),v(null===a||void 0===a?void 0:a[0])})).catch((e=>{404===e.response.status&&p(!1),console.error(e)}))},N=async e=>{"undefined"!==typeof e&&await(0,r.I3)(e).then((e=>{let{data:a}=e;m(a)})).catch((e=>{404===e.response.status&&p(!1),console.error(e)}))},y=async e=>{await(0,l.h)(e,"Pet").then((e=>{let{data:a}=e;g(a)})).catch((e=>{console.error(e),g([])}))};return(()=>{var e;return x?null===i||null===h?(0,u.jsx)("span",{"uk-spinner":"ratio: 4.5"}):(0,u.jsxs)("div",{"uk-grid":"",className:"section individual-grid",children:[(0,u.jsxs)("div",{className:"uk-width-2-5@l",children:[(0,u.jsx)("img",{src:"/".concat(i.picturePath),alt:"Pet: ".concat(i.name),title:"Pet: ".concat(i.name),className:"profile-pic"}),(0,u.jsxs)("div",{className:"info-contact",children:[(0,u.jsx)("h3",{children:"Contact details:"}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("span",{children:[(0,u.jsx)("span",{"uk-icon":"icon: mail; ratio: 2"}),"\xa0 \xa0",(0,u.jsx)("a",{href:"mailto:".concat(h.email),children:h.email})]}),(0,u.jsx)("br",{}),(0,u.jsxs)("span",{children:[(0,u.jsx)("span",{"uk-icon":"icon: receiver; ratio: 2"}),"\xa0 \xa0",(0,u.jsx)("a",{href:"tel:".concat(h.phoneNumber),children:h.phoneNumber})]})]}),(0,u.jsx)("hr",{})]})]}),(0,u.jsxs)("div",{className:"uk-width-3-5@l",children:[(0,u.jsxs)("h1",{className:"info-name",children:[i.name," ",i.reviewAvg>4&&(0,u.jsx)("span",{className:"uk-label label",children:"Highly Rated"})]}),(0,u.jsxs)("h3",{className:"info-charge",children:["Date Status: \xa0",i.mateStatus?(0,u.jsx)("span",{style:{color:"green"},children:"Available"}):(0,u.jsx)("span",{style:{color:"red"},children:"Unavailable"})]}),(0,u.jsx)("div",{className:"info-ratings",children:(0,u.jsx)(t.A,{rating:Number(i.reviewAvg)})}),(0,u.jsx)("div",{children:(0,u.jsxs)("h5",{className:"info-ratings-num",children:[null===(e=i.reviewAvg)||void 0===e?void 0:e.toFixed(3)," (",j.format(i.reviewCount)," review",(0===i.reviewCount||i.reviewCount>1)&&"s",")"]})}),(0,u.jsx)("hr",{}),(0,u.jsxs)("h5",{children:["Animal: ",i.animalType," | Breed: ",i.breed," | Location:"," ",i.location]}),(0,u.jsxs)("h4",{children:["Medical history of ",i.name,":"]}),(0,u.jsx)("p",{children:i.medicalHistory}),(0,u.jsx)("hr",{}),(0,u.jsx)("h4",{children:"Add a review:"}),(()=>{let e=JSON.parse(localStorage.getItem("loggedInUser"));var s;return e?(null===(s=e.user)||void 0===s?void 0:s.userId)===i.ownerId?(0,u.jsx)("legend",{children:"You cannot review your own pet."}):(0,u.jsx)(o.A,{loggedUser:e,reviewType:"Pet",reviewOfId:a,setReviews:g,reviews:w}):(0,u.jsxs)("legend",{children:["You're not logged in. ",(0,u.jsx)(c.N_,{to:"/login",children:"Login here"})]})})(),(0,u.jsx)("hr",{}),(0,u.jsx)("h4",{children:"Reviews:"}),0===w.length?(0,u.jsx)("legend",{children:"There are no reviews, yet."}):w.map(((e,a)=>(0,u.jsx)(d.A,{reviewUser:e,index:a,setReviews:g,reviews:w},e.petId)))]})]}):(0,u.jsx)("p",{className:"not-found-message",children:"404: Sorry, this page is not available!"})})()}},4681:(e,a,i)=>{i.d(a,{A:()=>l});var s=i(5043),t=i(7282),n=i(8722),r=i(579);const l=e=>{var a,i,l,o,d,c,u,v,h,m,w,g,x,p;const{reviewUser:j,index:k,setReviews:N,reviews:y}=e,[f,b]=(0,s.useState)(!1),[S,I]=(0,s.useState)(j.reviewString),[A,C]=(0,s.useState)(null!==(a=null===j||void 0===j?void 0:j.rating)&&void 0!==a?a:2.5),[D,P]=(0,s.useState)(""),T=new Intl.DateTimeFormat("en-In",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"});let U=JSON.parse(localStorage.getItem("loggedInUser"));const R=async()=>{await(0,n.wO)(j.reviewId,U.token).then((e=>{let{data:a}=e,i=[...y];i.splice(k,1),N(i)})).catch((e=>{let{response:a}=e;console.log(a),401===a.status&&(P("Delete failed: Session expired. Please login again."),setTimeout((()=>{localStorage.clear()}),1e3))}))},O=()=>{b(!f)};return(0,r.jsxs)("div",{className:"uk-card uk-card-default",children:[(0,r.jsxs)("div",{className:"uk-card-header",children:[(0,r.jsxs)("div",{className:"uk-grid-small uk-flex-middle","uk-grid":"",children:[(0,r.jsx)("div",{className:"uk-width-auto",children:(0,r.jsx)("img",{className:"uk-border-circle",width:"50",height:"50",alt:"".concat(null!==(i=null===j||void 0===j||null===(l=j.reviewerData)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.name)&&void 0!==i?i:"Philozooic User"),title:"".concat(null!==(d=null===j||void 0===j||null===(c=j.reviewerData)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.name)&&void 0!==d?d:"Philozooic User"),src:null!==j&&void 0!==j&&null!==(v=j.reviewerData)&&void 0!==v&&null!==(h=v[0])&&void 0!==h&&h.picturePath?"/".concat(null===j||void 0===j||null===(m=j.reviewerData)||void 0===m||null===(w=m[0])||void 0===w?void 0:w.picturePath):"/pp-default.jpg"})}),(0,r.jsxs)("div",{className:"uk-width-expand",children:[(0,r.jsx)("div",{className:"review-star-div-desktop",children:(0,r.jsx)(t.A,{rating:A>=0?A:null===j||void 0===j?void 0:j.rating,changeRating:f?e=>C(e):()=>{},starDimension:"17px",starHoverColor:"rgb(109, 122, 130)"})}),(0,r.jsx)("h3",{className:"uk-card-title uk-margin-remove-bottom reviewer-name",children:null!==(g=null===j||void 0===j||null===(x=j.reviewerData)||void 0===x||null===(p=x[0])||void 0===p?void 0:p.name)&&void 0!==g?g:"Philozooic User"}),(0,r.jsx)("p",{className:"uk-text-meta uk-margin-remove-top info-date",children:"undefined"!==typeof j.dateCreated&&T.format(new Date(j.dateCreated))})]})]}),(0,r.jsx)("div",{className:"review-star-div-mobile",children:(0,r.jsx)(t.A,{rating:A>=0?A:null===j||void 0===j?void 0:j.rating,changeRating:f?e=>C(e):()=>{},starDimension:"17px",starHoverColor:"rgb(109, 122, 130)"})})]}),(0,r.jsxs)("div",{className:"uk-card-body review-body",children:[(()=>{var e,a;if("undefined"!==typeof U&&null!==U&&U.user.userId===(null===j||void 0===j||null===(e=j.reviewerData)||void 0===e||null===(a=e[0])||void 0===a?void 0:a.userId))return f?""===D?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"edit-close-icon","uk-icon":"icon: close",onClick:e=>O()}),(0,r.jsx)("span",{className:"delete-icon","uk-icon":"icon: trash",onClick:e=>R()})]}):(0,r.jsx)("legend",{children:D}):""===D?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"edit-close-icon","uk-icon":"icon: pencil",onClick:e=>O()}),(0,r.jsx)("span",{className:"delete-icon","uk-icon":"icon: trash",onClick:e=>R()})]}):(0,r.jsx)("legend",{children:D})})(),f?""===D?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("textarea",{className:"uk-textarea",value:S,style:{margin:"7px 0"},onChange:e=>I(e.target.value),rows:"3"}),(0,r.jsx)("button",{onClick:e=>{(async e=>{delete e.reviewerData;let a={...e,reviewString:S,rating:A};await(0,n.EJ)(j.reviewId,a,U.token).then((e=>{let{data:a}=e;console.log(a),b(!1),j.reviewString=S})).catch((e=>{let{response:a}=e;console.log(a),401===a.status&&(P("Edit failed: Session expired. Please login again."),setTimeout((()=>{localStorage.clear()}),1e3))}))})({...j})},className:"update-review-btn",children:"Submit"})]}):D:(0,r.jsx)("p",{children:S})]})]},j.reviewId)}},7735:()=>{}}]);
//# sourceMappingURL=174.b99088c5.chunk.js.map