"use strict";(self.webpackChunkvet_website_react=self.webpackChunkvet_website_react||[]).push([[926],{1388:(e,a,i)=>{i.d(a,{Bx:()=>t,YV:()=>n,bk:()=>r,cN:()=>l});var s=i(6213);const n=async e=>await s.A.post("/ngo",e),r=async e=>await s.A.get("/ngo/".concat(e)),t=async(e,a)=>await s.A.post("/ngo/get/review",{locationArray:e,ngoId:a}),l=async(e,a)=>await s.A.put("/ngo/".concat(e),a)},8722:(e,a,i)=>{i.d(a,{EJ:()=>r,O4:()=>n,h:()=>t,wO:()=>l});var s=i(6213);const n=async(e,a)=>await s.A.post("/review",{review:e,token:a}),r=async(e,a,i)=>await s.A.put("/review/".concat(e),{review:a,token:i}),t=async(e,a)=>await s.A.get("/review/with-user",{params:{reviewType:a,reviewOfId:e}}),l=async(e,a)=>await s.A.delete("/review/".concat(e),{data:{token:a}})},3837:(e,a,i)=>{i.d(a,{I3:()=>n,KX:()=>r,RJ:()=>t});var s=i(6213);const n=async e=>await s.A.get("/user/".concat(e)),r=async e=>await s.A.get("/user-target/".concat(e)),t=async(e,a,i)=>await s.A.put("/user/".concat(e),{user:a,token:i})},2514:(e,a,i)=>{i.d(a,{A:()=>l});var s=i(5043),n=i(7282),r=i(8722),t=i(579);const l=e=>{var a,i,l,o,c,d,u;const[v,h]=(0,s.useState)(""),[m,x]=(0,s.useState)(0),[g,w]=(0,s.useState)(""),{loggedUser:j,reviewType:p,reviewOfId:k,reviews:N,setReviews:b}=e,f=new Intl.DateTimeFormat("en-In",{year:"numeric",month:"long",day:"numeric"});return(0,t.jsxs)("div",{className:"uk-card uk-card-default",children:[(0,t.jsxs)("div",{className:"uk-card-header",children:[(0,t.jsxs)("div",{className:"uk-grid-small uk-flex-middle","uk-grid":"",children:[(0,t.jsx)("div",{className:"uk-width-auto",children:(0,t.jsx)("img",{className:"uk-border-circle",width:"50",height:"50",alt:null!==j&&void 0!==j&&null!==(a=j.user)&&void 0!==a&&a.name?"".concat(null===j||void 0===j||null===(i=j.user)||void 0===i?void 0:i.name):"Philozooic User",title:null!==j&&void 0!==j&&null!==(l=j.user)&&void 0!==l&&l.name?"".concat(null===j||void 0===j||null===(o=j.user)||void 0===o?void 0:o.name):"Philozooic User",src:null!==j&&void 0!==j&&null!==(c=j.user)&&void 0!==c&&c.picturePath?"/".concat(null===j||void 0===j||null===(d=j.user)||void 0===d?void 0:d.picturePath):"/pp-default.jpg"})}),(0,t.jsxs)("div",{className:"uk-width-expand",children:[""===g&&(0,t.jsx)("div",{className:"review-star-div-desktop",children:(0,t.jsx)(n.A,{rating:Number(m),starDimension:"17px",changeRating:e=>x(e),starHoverColor:"rgb(109, 122, 130)"})}),(0,t.jsx)("h3",{className:"uk-card-title uk-margin-remove-bottom reviewer-name",children:null===j||void 0===j||null===(u=j.user)||void 0===u?void 0:u.name}),(0,t.jsx)("p",{className:"uk-text-meta uk-margin-remove-top info-date",children:f.format()})]})]}),(0,t.jsx)("div",{className:"review-star-div-mobile",children:(0,t.jsx)(n.A,{rating:Number(m),starDimension:"17px",changeRating:e=>x(e),starHoverColor:"rgb(109, 122, 130)"})})]}),""===g?(0,t.jsxs)("div",{className:"uk-card-body review-body",children:[(0,t.jsx)("textarea",{className:"uk-textarea",rows:"5",placeholder:"Type your review here",onChange:e=>h(e.target.value),value:v}),(0,t.jsx)("div",{className:"submit-btn-div",children:(0,t.jsx)("button",{onClick:e=>{e.preventDefault(),(async()=>{var e;let a={reviewString:v,rating:m,reviewType:p,reviewOfId:k,reviewerId:null===j||void 0===j||null===(e=j.user)||void 0===e?void 0:e.userId};await(0,r.O4)(a,null===j||void 0===j?void 0:j.token).then((e=>{let{data:a}=e;b([...N,{...a,reviewerData:[j.user]}]),h(""),w(""),x(0)})).catch((e=>{let{response:a}=e;401===a.status&&(w("Session Expired: Please login again."),setTimeout((()=>{localStorage.clear()}),1e4))}))})()},children:"Submit"})})]}):(0,t.jsx)("h6",{className:"session-err-message",children:g})]})}},2926:(e,a,i)=>{i.r(a),i.d(a,{default:()=>v});var s=i(5043),n=i(7282),r=(i(7735),i(1388)),t=i(3837),l=i(8722),o=i(2514),c=i(4681),d=i(2582),u=i(579);const v=e=>{const{ngoId:a}=e.match.params,[i,v]=(0,s.useState)(null),[h,m]=(0,s.useState)(null),[x,g]=(0,s.useState)([]),[w,j]=(0,s.useState)(!0);(0,s.useEffect)((()=>{if("undefined"===typeof e.location.state)k(a);else{let{tempNGO:a}=e.location.state;v(a)}N(a),b(a)}),[a,e.location]);const p=new Intl.NumberFormat("en-IN"),k=async e=>{await(0,r.Bx)([],e).then((e=>{let{data:a}=e;v(null===a||void 0===a?void 0:a[0]),j(!0)})).catch((e=>{404===e.response.status&&j(!1),console.error(e)}))},N=async e=>{await(0,t.KX)(e).then((e=>{let{data:a}=e;m(a)})).catch((e=>{404===e.response.status&&m(!1),console.error(e)}))},b=async e=>{await(0,l.h)(e,"NGO").then((e=>{let{data:a}=e;g(a)})).catch((e=>{console.error(e),g([])}))};return(()=>{var e;return w?null===i||null===h?(0,u.jsx)("span",{"uk-spinner":"ratio: 4.5"}):(0,u.jsxs)("div",{"uk-grid":"",className:"section individual-grid",children:[(0,u.jsxs)("div",{className:"uk-width-2-5@l",children:[(0,u.jsx)("img",{src:"/".concat(i.picturePath),alt:"NGO: ".concat(i.name),title:"NGO: ".concat(i.name),className:"profile-pic"}),(0,u.jsxs)("div",{className:"info-contact",children:[(0,u.jsx)("h3",{children:"Contact details:"}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("span",{children:[(0,u.jsx)("span",{"uk-icon":"icon: mail; ratio: 2"}),"\xa0 \xa0",(0,u.jsx)("a",{href:"mailto:".concat(h.email),children:h.email})]}),(0,u.jsx)("br",{}),(0,u.jsxs)("span",{children:[(0,u.jsx)("span",{"uk-icon":"icon: receiver; ratio: 2"}),"\xa0 \xa0",(0,u.jsx)("a",{href:"tel:".concat(h.phoneNumber),children:h.phoneNumber})]})]}),(0,u.jsx)("hr",{})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{children:"To Donate:"}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("span",{children:["Account Number: ",i.accountNumber]}),(0,u.jsx)("br",{}),(0,u.jsxs)("span",{children:["IFS Code: ",i.bankIFSC]}),(0,u.jsx)("br",{}),(0,u.jsxs)("span",{children:["UPI: ",i.upiId]})]}),(0,u.jsx)("hr",{})]})]}),(0,u.jsxs)("div",{className:"uk-width-3-5@l",children:[(0,u.jsxs)("h1",{className:"info-name",children:[i.name,i.reviewAvg>4&&(0,u.jsx)("span",{className:"uk-label label",children:"Highly Rated"})]}),(0,u.jsx)("div",{className:"info-ratings",children:(0,u.jsx)(n.A,{rating:Number(i.reviewAvg)})}),(0,u.jsx)("div",{children:(0,u.jsxs)("h5",{className:"info-ratings-num",children:[null===(e=i.reviewAvg)||void 0===e?void 0:e.toFixed(3)," (",p.format(i.reviewCount)," review",(0===i.reviewCount||i.reviewCount>1)&&"s",")"]})}),(0,u.jsx)("hr",{}),(0,u.jsxs)("h5",{children:["Location: ",i.location]}),(0,u.jsx)("h5",{className:"address-title",children:"Address:"}),(0,u.jsx)("span",{children:i.address}),(0,u.jsxs)("h4",{children:["About ",i.name,":"]}),(0,u.jsx)("p",{children:i.about}),(0,u.jsx)("hr",{}),(0,u.jsx)("h4",{children:"Add a review:"}),(()=>{let e=JSON.parse(localStorage.getItem("loggedInUser"));var i;return e?(null===(i=e.user)||void 0===i?void 0:i.targetUserId)===a?(0,u.jsx)("legend",{children:"You cannot review your own NGO profile."}):(0,u.jsx)(o.A,{loggedUser:e,reviewType:"NGO",reviewOfId:a,setReviews:g,reviews:x}):(0,u.jsxs)("legend",{children:["You're not logged in. ",(0,u.jsx)(d.N_,{to:"/login",children:"Login here"})]})})(),(0,u.jsx)("hr",{}),(0,u.jsx)("h4",{children:"Reviews:"}),0===x.length?(0,u.jsx)("legend",{children:"There are no reviews, yet."}):x.map(((e,a)=>(0,u.jsx)(c.A,{reviewUser:e,index:a,setReviews:g,reviews:x},e.ngoId)))]})]}):(0,u.jsx)("p",{className:"not-found-message",children:"404: Sorry, this page is not available!"})})()}},4681:(e,a,i)=>{i.d(a,{A:()=>l});var s=i(5043),n=i(7282),r=i(8722),t=i(579);const l=e=>{var a,i,l,o,c,d,u,v,h,m,x,g,w,j;const{reviewUser:p,index:k,setReviews:N,reviews:b}=e,[f,y]=(0,s.useState)(!1),[I,S]=(0,s.useState)(p.reviewString),[A,C]=(0,s.useState)(null!==(a=null===p||void 0===p?void 0:p.rating)&&void 0!==a?a:2.5),[D,O]=(0,s.useState)(""),P=new Intl.DateTimeFormat("en-In",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"});let U=JSON.parse(localStorage.getItem("loggedInUser"));const T=async()=>{await(0,r.wO)(p.reviewId,U.token).then((e=>{let{data:a}=e,i=[...b];i.splice(k,1),N(i)})).catch((e=>{let{response:a}=e;console.log(a),401===a.status&&(O("Delete failed: Session expired. Please login again."),setTimeout((()=>{localStorage.clear()}),1e3))}))},R=()=>{y(!f)};return(0,t.jsxs)("div",{className:"uk-card uk-card-default",children:[(0,t.jsxs)("div",{className:"uk-card-header",children:[(0,t.jsxs)("div",{className:"uk-grid-small uk-flex-middle","uk-grid":"",children:[(0,t.jsx)("div",{className:"uk-width-auto",children:(0,t.jsx)("img",{className:"uk-border-circle",width:"50",height:"50",alt:"".concat(null!==(i=null===p||void 0===p||null===(l=p.reviewerData)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.name)&&void 0!==i?i:"Philozooic User"),title:"".concat(null!==(c=null===p||void 0===p||null===(d=p.reviewerData)||void 0===d||null===(u=d[0])||void 0===u?void 0:u.name)&&void 0!==c?c:"Philozooic User"),src:null!==p&&void 0!==p&&null!==(v=p.reviewerData)&&void 0!==v&&null!==(h=v[0])&&void 0!==h&&h.picturePath?"/".concat(null===p||void 0===p||null===(m=p.reviewerData)||void 0===m||null===(x=m[0])||void 0===x?void 0:x.picturePath):"/pp-default.jpg"})}),(0,t.jsxs)("div",{className:"uk-width-expand",children:[(0,t.jsx)("div",{className:"review-star-div-desktop",children:(0,t.jsx)(n.A,{rating:A>=0?A:null===p||void 0===p?void 0:p.rating,changeRating:f?e=>C(e):()=>{},starDimension:"17px",starHoverColor:"rgb(109, 122, 130)"})}),(0,t.jsx)("h3",{className:"uk-card-title uk-margin-remove-bottom reviewer-name",children:null!==(g=null===p||void 0===p||null===(w=p.reviewerData)||void 0===w||null===(j=w[0])||void 0===j?void 0:j.name)&&void 0!==g?g:"Philozooic User"}),(0,t.jsx)("p",{className:"uk-text-meta uk-margin-remove-top info-date",children:"undefined"!==typeof p.dateCreated&&P.format(new Date(p.dateCreated))})]})]}),(0,t.jsx)("div",{className:"review-star-div-mobile",children:(0,t.jsx)(n.A,{rating:A>=0?A:null===p||void 0===p?void 0:p.rating,changeRating:f?e=>C(e):()=>{},starDimension:"17px",starHoverColor:"rgb(109, 122, 130)"})})]}),(0,t.jsxs)("div",{className:"uk-card-body review-body",children:[(()=>{var e,a;if("undefined"!==typeof U&&null!==U&&U.user.userId===(null===p||void 0===p||null===(e=p.reviewerData)||void 0===e||null===(a=e[0])||void 0===a?void 0:a.userId))return f?""===D?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"edit-close-icon","uk-icon":"icon: close",onClick:e=>R()}),(0,t.jsx)("span",{className:"delete-icon","uk-icon":"icon: trash",onClick:e=>T()})]}):(0,t.jsx)("legend",{children:D}):""===D?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"edit-close-icon","uk-icon":"icon: pencil",onClick:e=>R()}),(0,t.jsx)("span",{className:"delete-icon","uk-icon":"icon: trash",onClick:e=>T()})]}):(0,t.jsx)("legend",{children:D})})(),f?""===D?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("textarea",{className:"uk-textarea",value:I,style:{margin:"7px 0"},onChange:e=>S(e.target.value),rows:"3"}),(0,t.jsx)("button",{onClick:e=>{(async e=>{delete e.reviewerData;let a={...e,reviewString:I,rating:A};await(0,r.EJ)(p.reviewId,a,U.token).then((e=>{let{data:a}=e;console.log(a),y(!1),p.reviewString=I})).catch((e=>{let{response:a}=e;console.log(a),401===a.status&&(O("Edit failed: Session expired. Please login again."),setTimeout((()=>{localStorage.clear()}),1e3))}))})({...p})},className:"update-review-btn",children:"Submit"})]}):D:(0,t.jsx)("p",{children:I})]})]},p.reviewId)}},7735:()=>{}}]);
//# sourceMappingURL=926.dbf302aa.chunk.js.map